<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>VS Code + Python å¼€å‘ QGIS æ’ä»¶ç¯å¢ƒé…ç½®æŒ‡å—</title>
    <link href="/2023/10/22/VS-Code-Python-%E5%BC%80%E5%8F%91-QGIS-%E6%8F%92%E4%BB%B6%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/"/>
    <url>/2023/10/22/VS-Code-Python-%E5%BC%80%E5%8F%91-QGIS-%E6%8F%92%E4%BB%B6%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><div class="note note-info">            <p>æ•´ç¯‡æ•™ç¨‹ For Windowsï¼Œå¥½åƒMacæ²¡æœ‰è¿™ä¹ˆå¤šäº‹ã€‚å‰ä¸€æ®µå¼€å‘æ’ä»¶çš„æ—¶å€™ç»™åŒç»„çš„åŒå­¦å†™çš„é…ç½®æ–‡æ¡£ï¼Œæ°å¥½å‘ç°ä¸­æ–‡äº’è”ç½‘ä¸Šç›¸å…³çš„å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¹Ÿä¸å¤ªç³»ç»Ÿï¼Œåšä¸€ä¸ªç³»ç»Ÿçš„æ•´ç†ã€‚</p>          </div><h1 id="QGIS-å®˜æ–¹Plugin-æ–‡æ¡£"><a href="#QGIS-å®˜æ–¹Plugin-æ–‡æ¡£" class="headerlink" title="QGIS å®˜æ–¹Plugin æ–‡æ¡£"></a>QGIS å®˜æ–¹Plugin æ–‡æ¡£</h1><h2 id="Official-Version-Whatâ€™s-Next-For-Dialog-Plugins"><a href="#Official-Version-Whatâ€™s-Next-For-Dialog-Plugins" class="headerlink" title="Official Version (Whatâ€™s Next For Dialog Plugins)"></a>Official Version (Whatâ€™s Next For Dialog Plugins)</h2><ol><li>If resources.py is not present in your plugin directory, compile the resources file using pyrcc5 (simply use <code>pb_tool</code> or <code>make</code> if you have automake)</li><li>Optionally, test the generated sources using <code>make test</code> (or run tests from your IDE)</li><li>Copy the entire directory containing your new plugin to the QGIS plugin directory (see Notes below)</li><li>Test the plugin by enabling it in the QGIS plugin manager</li><li>Customize it by editing the implementation file <code>viewshed_analysis.py</code></li><li>Create your own custom icon, replacing the default <code>icon.png</code><br>Modify your user interface by opening <code>viewshed_analysis_dialog_base.ui</code> in Qt Designer</li></ol><h1 id="QGIS-æ’ä»¶å¼€å‘çš„ç¯å¢ƒé…ç½®"><a href="#QGIS-æ’ä»¶å¼€å‘çš„ç¯å¢ƒé…ç½®" class="headerlink" title="QGIS æ’ä»¶å¼€å‘çš„ç¯å¢ƒé…ç½®"></a>QGIS æ’ä»¶å¼€å‘çš„ç¯å¢ƒé…ç½®</h1><h2 id="Environment-Configuration"><a href="#Environment-Configuration" class="headerlink" title="Environment Configuration"></a>Environment Configuration</h2><p>æœ€åŸºç¡€çš„ç‰ˆæœ¬ï¼š<a href="https://zhuanlan.zhihu.com/p/344965380">çŸ¥ä¹ç½‘ç«™ï¼šä»0å¼€å§‹å¼€å‘QGISæ’ä»¶</a></p><p>ç”¨äºè‡ªåŠ¨åˆ›å»º GUI ç•Œé¢çš„ QGIS æ’ä»¶ï¼š<a href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html">Building a Processing Plugin</a> (<a href="https://www.osgeo.cn/qgis-tutorial/docs/3/processing_python_plugin.html">In Chinese</a>)</p><blockquote><p>ä¸Šé¢è¿™ä¸ªå·¥å…·æ’ä»¶æœ‰æ•ˆè§£å†³äº†æ’ä»¶GUIçš„é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥ç”¨ä¸QGISé£æ ¼éå¸¸ç»Ÿä¸€çš„GUIè¿›è¡Œå¼€å‘ï¼Œè¿™ä¸ªå·¥å…·åªé€‚ç”¨äºç®—æ³•å¤„ç†ç›¸å…³çš„æ’ä»¶</p></blockquote><h2 id="å¦‚ä½•æŠŠ-Tool-å¯¼å…¥-QGIS-ä¸­"><a href="#å¦‚ä½•æŠŠ-Tool-å¯¼å…¥-QGIS-ä¸­" class="headerlink" title="å¦‚ä½•æŠŠ Tool å¯¼å…¥ QGIS ä¸­"></a>å¦‚ä½•æŠŠ Tool å¯¼å…¥ QGIS ä¸­</h2><ol><li><p>åœ¨ Debug ä¹‹å‰é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å¼€å‘å¥½çš„æ’ä»¶åŠ å…¥åˆ° QGIS çš„ç¯å¢ƒä¸­ï¼Œè¿™é‡Œæä¾›ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><p>ç›´æ¥æŠŠç”¨ Plugin Builder ç”Ÿæˆå¥½çš„æ•´ä¸ªæ’ä»¶ç›®å½•æ‹·åˆ°<code>C:\Users\---\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins</code></p></li><li><p>è¿™é‡Œæ›´æ¨èç”¨ symbolic link çš„æ–¹æ³•ç›´æ¥åˆ›å»ºè½¯é“¾æ¥ </p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">mklink /D <span class="hljs-string">&quot;C:\Users\---\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\your_plugin&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$</span>&#123;your_plugin_workspace&#125;\your_plugin&quot;</span><br></code></pre></td></tr></table></figure></li></ol> <div class="note note-warning">            <p>WARNING: There is a huge risk though of losing your code if you uninstall the plugin by accident.</p>          </div></li><li><p>é‡å¯ QGIS, Menu Plugins -&gt; Manage and Install Plugins</p></li><li><p>æŠŠ viewshed analysis æ‰“é’©</p></li><li><p>åœ¨ Plugins èœå•æˆ–è€… Toolbox ä¸­å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„æ’ä»¶</p></li></ol><h1 id="å…³äºä½¿ç”¨-VS-Code-è¿›è¡Œå¼€å‘çš„é—®é¢˜"><a href="#å…³äºä½¿ç”¨-VS-Code-è¿›è¡Œå¼€å‘çš„é—®é¢˜" class="headerlink" title="å…³äºä½¿ç”¨ VS Code è¿›è¡Œå¼€å‘çš„é—®é¢˜"></a>å…³äºä½¿ç”¨ VS Code è¿›è¡Œå¼€å‘çš„é—®é¢˜</h1><div class="note note-warning">            <p>ç”¨ VS Code å¼€å‘æ˜¯ä¸€ä»¶éå¸¸ tricky çš„äº‹æƒ…ï¼Œè¿™å¯èƒ½éœ€è¦éå¸¸é•¿çš„é…ç½®æ—¶é—´</p>          </div><p><strong>å†æ¬¡å£°æ˜ï¼Œå¥½åƒåªæœ‰Windowsæœ‰è¿™ä¹ˆå¤šéº»çƒ¦çš„é—®é¢˜</strong></p><p>å¦å¤–ï¼Œæ ¹æ®å®˜æ–¹ç½‘ç«™çš„æ¨èï¼Œæœ€å¥½ä½¿ç”¨ long-term-release çš„ç‰ˆæœ¬è¿›è¡Œå¼€å‘ é long-term-release çš„ç‰ˆæœ¬çš„è·¯å¾„å¯èƒ½ä¸ä¸‹æ–‡ä¸­çš„æè¿°ç•¥æœ‰åŒºåˆ«ï¼Œä¸»è¦æ˜¯å„ç§è·¯å¾„å’Œæ–‡ä»¶åä¸­ qgis-ltr å’Œ qgis çš„åŒºåˆ«</p><h2 id="å¦‚ä½•åœ¨-Integrated-terminal-è¿è¡Œ"><a href="#å¦‚ä½•åœ¨-Integrated-terminal-è¿è¡Œ" class="headerlink" title="å¦‚ä½•åœ¨ Integrated terminal è¿è¡Œ"></a>å¦‚ä½•åœ¨ Integrated terminal è¿è¡Œ</h2><p>æœ‰å‡ ç§æ–¹æ¡ˆè§£å†³import qgisç›¸å…³çš„é—®é¢˜ï¼š</p><ul><li><p>æ ¹æ®ä»¥ä¸‹æ–‡ä»¶è‡ªå·±é…ç½® settings.jsonï¼Œè¿™äº›æ–‡ä»¶åŸºæœ¬å¯ä»¥åœ¨ QGIS çš„æ ¹ç›®å½•ä¸‹æ‰¾åˆ°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">%OSGEO4W_ROOT%/bin/python-qgis-ltr.bat    <br>%OSGEO4W_ROOT%/bin/o4w_env.bat    <br>%OSGEO4W_ROOT%/bin/o4w_env.bat<br></code></pre></td></tr></table></figure></li><li><p>åœ¨ Integrated terminal ä¸­è¿è¡Œ <code>%OSGEO4W_ROOT%/bin/python-qgis-ltr-env.bat </code>åå†è¿è¡Œpythonç¨‹åº</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell">rem python<span class="hljs-literal">-qgis-ltr-env</span>.bat    <br>@<span class="hljs-built_in">echo</span> off    call <span class="hljs-string">&quot;%~dp0\o4w_env.bat&quot;</span>   <br>@<span class="hljs-built_in">echo</span> off    path %OSGEO4W_ROOT%\apps\qgis<span class="hljs-literal">-ltr</span>\bin;%PATH%    <br><span class="hljs-built_in">set</span> QGIS_PREFIX_PATH=%OSGEO4W_ROOT:\=/%/apps/qgis<span class="hljs-literal">-ltr</span>   <br><span class="hljs-built_in">set</span> GDAL_FILENAME_IS_UTF8=YES    <br>rem <span class="hljs-built_in">Set</span> VSI cache to be used as buffer, see <span class="hljs-comment">#6448    </span><br><span class="hljs-built_in">set</span> VSI_CACHE=TRUE    <br><span class="hljs-built_in">set</span> VSI_CACHE_SIZE=<span class="hljs-number">1000000</span>    <br><span class="hljs-built_in">set</span> QT_PLUGIN_PATH=%OSGEO4W_ROOT%\apps\qgis<span class="hljs-literal">-ltr</span>\qtplugins;%OSGEO4W_ROOT%\apps\qt5\plugins    <br><span class="hljs-built_in">set</span> PYTHONPATH=%OSGEO4W_ROOT%\apps\qgis<span class="hljs-literal">-ltr</span>\python;%PYTHONPATH%<br></code></pre></td></tr></table></figure></li><li><p>Thanks to <a href="https://gist.github.com/thbaumann/73c873d4c49d8c1add8dc97359cebabe%EF%BC%8C%E6%9C%89%E4%B8%80%E4%B8%AA%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%B0%86.bat%E4%BD%9C%E4%B8%BA">https://gist.github.com/thbaumann/73c873d4c49d8c1add8dc97359cebabeï¼Œæœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•å¯ä»¥ç›´æ¥å°†.batä½œä¸º</a> vscode çš„è§£é‡Šå™¨ (åœ¨ vscode çš„è®¾ç½®ä¸­æ— æ³•å°†é.exeçš„æ–‡ä»¶è®¾ä¸ºè§£é‡Šå™¨)</p><blockquote><p>The bread and butter of this configuration is â€œpython.pythonPathâ€: â€œC:&#x2F;OSGeo4W64&#x2F;bin&#x2F;python-qgis.batâ€, which sets all the correct paths and bindings for us. I donâ€™t really know why it works to refer a .bat file as python interpreter, but apparently itâ€™s fine and fixes alot of linting issues.</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// settings.json    </span><br><span class="hljs-punctuation">&#123;</span> <br>        <span class="hljs-comment">// ç¬¬ä¸€ä¸ªé€‰é¡¹è²Œä¼¼æ˜¯è¿‡æ—¶çš„</span><br>        <span class="hljs-attr">&quot;python.pythonPath&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot; %OSGEO4W_ROOT%\\bin\\python-qgis-ltr.bat&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;python.defaultInterpreterPath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;%OSGEO4W_ROOT%\\bin\\python-qgis-ltr.bat&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ª tricky çš„ç‚¹æ˜¯ç›¸å¯¹è·¯å¾„å¼•ç”¨çš„é—®é¢˜ï¼š</p><div class="note note-info">            <p>è¿™æ®µä¸œè¥¿æ˜¯é’ˆå¯¹ dialog çš„é‚£ç§è‡ªå·±å†™ GUI çš„ plugin çš„ï¼Œprocessing ç³»åˆ—çš„æ’ä»¶ä¸å¤ªå—åˆ°è¿™ä¸ªå›°æ‰°</p>          </div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># This works for integragted terminal</span><br><span class="hljs-comment"># Initialize Qt resources from file resources.py</span><br><span class="hljs-keyword">from</span> resources <span class="hljs-keyword">import</span> *<br><span class="hljs-comment"># Import the code for the dialog</span><br><span class="hljs-keyword">from</span> visibility_analysis_dialog <span class="hljs-keyword">import</span> VisibilityAnalysisDialog<br><span class="hljs-comment"># --------------------------------------</span><br><span class="hljs-comment"># This works for qgis </span><br><span class="hljs-comment"># Initialize Qt resources from file resources.py</span><br><span class="hljs-keyword">from</span> .resources <span class="hljs-keyword">import</span> *<br><span class="hljs-comment"># Import the code for the dialog</span><br><span class="hljs-keyword">from</span> .visibility_analysis_dialog <span class="hljs-keyword">import</span> VisibilityAnalysisDialog<br></code></pre></td></tr></table></figure><h2 id="Debugging-in-VS-Code"><a href="#Debugging-in-VS-Code" class="headerlink" title="Debugging in VS Code"></a>Debugging in VS Code</h2><blockquote><p>Thanks to<br><a href="https://gispofinland.medium.com/cooking-with-gispo-qgis-plugin-development-in-vs-code-19f95efb1977">https://gispofinland.medium.com/cooking-with-gispo-qgis-plugin-development-in-vs-code-19f95efb1977</a><br><a href="https://gist.github.com/thbaumann/73c873d4c49d8c1add8dc97359cebabe">https://gist.github.com/thbaumann/73c873d4c49d8c1add8dc97359cebabe</a></p></blockquote><p>åˆ©ç”¨ VS Code å¯¹ QGIS æ’ä»¶è¿›è¡Œå¼€å‘éœ€è¦åˆ©ç”¨ QGIS ä¸­çš„ Debugvs æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ä¼šåœ¨æœ¬åœ°çš„ 5678 ç«¯å£åˆ›å»ºä¸€ä¸ª debug çš„ä¼ è¾“é€šé“ï¼Œè®© VS Code çš„ debug launch å¯ä»¥è¿›è¡Œè¿œç¨‹çš„ attach debuggingã€‚</p><p>åœ¨å®‰è£…è¿™ä¸ªæ’ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <strong>QGIS å¯¹åº”çš„ python ç›®å½•ä¸‹</strong>å®‰è£… ptvsd</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">pip install ptvsd<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>è¿™é‡Œå»ºè®®ä¸€å®šåœ¨å®‰è£…ä¹‹å‰æ£€æŸ¥ä¸€ä¸‹å½“å‰ Python çš„ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼Œå»ºè®®ç›´æ¥æ‰“å¼€ OSGeo4W shell è¿›è¡Œé…ç½®ï¼ˆé€šå¸¸åœ¨<code>%OSGeo4w_ROOT\OSGeo4W.bat</code>ï¼‰<br>ä¹‹åç›´æ¥åœ¨ QGIS ä¸­å®‰è£… Debugvs å³å¯</p>          </div><p>æˆ‘ä»¬è¿˜éœ€è¦é¢å¤–é…ç½®ä¸€ä¸‹ VS Code çš„ <code>launch.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Python: Remote Attach&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;python&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;attach&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5678</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;host&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;localhost&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;pathMappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;localRoot&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;/your_plugin&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// path to your plugin where you are developing</span><br>            <span class="hljs-attr">&quot;remoteRoot&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;C:\\Users\\---\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\default\\python\\plugins\\your_plugin&quot;</span> <span class="hljs-comment">// path to where the QGIS plugin folder lives </span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>å®‰è£…å¥½ä¹‹ååœ¨ QGIS ä¸­ç‚¹å‡» <code>Plugins -&gt; Enable Debug for Visual Studio -&gt; Enable Debug for Visual Studio</code> å³å¯æ‰“å¼€ Debug Port (localhost:5678)ï¼Œéšååœ¨ VS Code ä¸­ç›´æ¥è¿è¡Œ Debug å³å¯</p><p>æ¯ä¸€æ¬¡ä¿®æ”¹ä¹‹åéƒ½è¦ç”¨ <code>Plugin Reloader</code> reload ä¸€æ¬¡</p>]]></content>
    
    
    <categories>
      
      <category>GIS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VS Code</tag>
      
      <tag>Python</tag>
      
      <tag>QGIS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo å»ºç«™æ€»ç»“</title>
    <link href="/2023/10/22/hexo-%E5%BB%BA%E7%AB%99/"/>
    <url>/2023/10/22/hexo-%E5%BB%BA%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo-å»ºç«™è¿‡ç¨‹"><a href="#Hexo-å»ºç«™è¿‡ç¨‹" class="headerlink" title="Hexo å»ºç«™è¿‡ç¨‹"></a>Hexo å»ºç«™è¿‡ç¨‹</h1><h2 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h2><ol><li><p>ä¸€ä¸ª Github è´¦å·ï¼Œ<a href="https://blog.csdn.net/yaorongke/article/details/119086305">ç”³è¯·æ•™ç¨‹</a></p></li><li><p>åœ¨ç”µè„‘ä¸Šå®‰è£… gitï¼Œ[gitå®‰è£…æ•™ç¨‹]åœ¨(<a href="https://blog.csdn.net/yaorongke/article/details/119085413">https://blog.csdn.net/yaorongke/article/details/119085413</a>)</p></li><li><p>åœ¨ç”µè„‘ä¸Šå®‰è£… NodeJSï¼Œ<a href="https://blog.csdn.net/yaorongke/article/details/119084295">NodeJSå®‰è£…æ•™ç¨‹</a></p></li></ol><h2 id="Hexo-å®‰è£…å’Œæœ¬åœ°æµ‹è¯•"><a href="#Hexo-å®‰è£…å’Œæœ¬åœ°æµ‹è¯•" class="headerlink" title="Hexo å®‰è£…å’Œæœ¬åœ°æµ‹è¯•"></a>Hexo å®‰è£…å’Œæœ¬åœ°æµ‹è¯•</h2><ol><li><p>å®‰è£… hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹ hexo ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo -v<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»º blog</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">hexo init </span><span class="hljs-template-variable">&#123;YOUR_BLOG_NAME&#125;</span><span class="language-xml"></span><br><span class="language-xml">cd </span><span class="hljs-template-variable">&#123;YOUR_BLOG_NAME&#125;</span><span class="language-xml"></span><br><span class="language-xml">npm install</span><br></code></pre></td></tr></table></figure></li><li><p>blogçš„æœ¬åœ°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo g -d <span class="hljs-comment"># generate and deploy</span><br>hexo s <span class="hljs-comment"># server</span><br></code></pre></td></tr></table></figure></li><li><p>æµè§ˆå™¨è®¿é—® <code>http://localhost:4000</code> å³å¯æ‰“å¼€æ–°å»ºçš„åšå®¢ï¼Œé¡µé¢çš„é»˜è®¤é£æ ¼å¦‚ä¸‹<br><img src="/2023/10/22/hexo-%E5%BB%BA%E7%AB%99/hexo_default.png" alt="hexoé»˜è®¤é¡µé¢"></p></li></ol><p>Hexo çš„é»˜è®¤ä¸»é¢˜å¯èƒ½æ¯”è¾ƒä¸‘é™‹ï¼Œä¸è¿‡hexoæœ¬èº«æä¾›äº†å¾ˆå¤šä¸åŒçš„ä¸»é¢˜ï¼Œæ¯”è¾ƒå¸¸ç”¨ï¼ˆäº’è”ç½‘ä¸Šèµ„æºè¾ƒå¤šçš„ï¼‰æœ‰ <a href="https://theme-next.js.org/">NeXT</a> å’Œ <a href="https://hexo.fluid-dev.com/">Fluid</a></p><h2 id="Github-pageséƒ¨ç½²"><a href="#Github-pageséƒ¨ç½²" class="headerlink" title="Github pageséƒ¨ç½²"></a>Github pageséƒ¨ç½²</h2><h1 id="Hexo-å®˜æ–¹-Hello-world"><a href="#Hexo-å®˜æ–¹-Hello-world" class="headerlink" title="Hexo å®˜æ–¹ Hello world"></a>Hexo å®˜æ–¹ Hello world</h1><div class="note note-info">            <p>è¿™ä¸ªå®˜æ–¹çš„ Hello world å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæ“ä½œæ‰‹å†Œ</p>          </div><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <categories>
      
      <category>åšå®¢å»ºç«™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åšå®¢ç¾åŒ–è‡ªè¿°</title>
    <link href="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/"/>
    <url>/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œä¸»è¦è®°å½•ä¸€ä¸‹æœ¬åšå®¢å»ºç«™è¿‡ç¨‹ä¸­ç”¨åˆ°çš„ç¾åŒ–æ‰‹æ®µå…±å‚è€ƒè€ƒ</p></blockquote><h1 id="è®¿é—®é‡ç»Ÿè®¡"><a href="#è®¿é—®é‡ç»Ÿè®¡" class="headerlink" title="è®¿é—®é‡ç»Ÿè®¡"></a>è®¿é—®é‡ç»Ÿè®¡</h1><p><code>Fluid</code> ä¸»é¢˜ä¸­é’ˆå¯¹é˜…è¯»é‡å·²ç»æœ‰å†™å¥½çš„ä»£ç ï¼Œä½†æ˜¯éœ€è¦è‡ªå·±é…ç½®ç¬¬ä¸‰æ–¹çš„æ•°æ®é‡ç»Ÿè®¡æœåŠ¡æ‰èƒ½ä½¿ç”¨ã€‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ <code>LeanCloud</code> çš„å…è´¹æœåŠ¡æ¥è¿›è¡Œç»Ÿè®¡ï¼ŒåŒæ—¶è¿™ä¸ªä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ¥æ¥å…¥åé¢çš„è¯„è®ºåŒº</p><h2 id="1-ç”³è¯·-LeanCloud-è´¦å·å¹¶åˆ›å»ºåº”ç”¨"><a href="#1-ç”³è¯·-LeanCloud-è´¦å·å¹¶åˆ›å»ºåº”ç”¨" class="headerlink" title="1. ç”³è¯· LeanCloud è´¦å·å¹¶åˆ›å»ºåº”ç”¨"></a>1. ç”³è¯· LeanCloud è´¦å·å¹¶åˆ›å»ºåº”ç”¨</h2><p>è¿›å…¥<a href="https://console.leancloud.cn/">å®˜ç½‘</a> æ³¨å†Œè´¦å·</p><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/%E6%B3%A8%E5%86%8C.png" alt="æ³¨å†Œé¡µé¢"></p><p>æ³¨å†Œåéœ€è¦å®åè®¤è¯å’Œé‚®ç®±éªŒè¯ï¼Œå®Œæˆåæ‰èƒ½ä½¿ç”¨å„é¡¹æœåŠ¡</p><p>éªŒè¯å®Œæˆåé€‰æ‹©åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©å…è´¹çš„å¼€å‘ç‰ˆå³å¯</p><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8.png" alt="åˆ›å»ºåº”ç”¨"></p><p>è¿›å…¥è¯¥åº”ç”¨çš„ <code>è®¾ç½®-&gt;åº”ç”¨å‡­è¯</code>ï¼Œæ‰¾åˆ° <code>AppID</code>, <code>AppKey</code>, <code>REST API æœåŠ¡å™¨åœ°å€</code> ä¸‰ä¸ªå±æ€§ï¼Œè®°å½•ä¸‹æ¥åé¢ä½¿ç”¨</p><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95.png" alt="åº”ç”¨è®°å½•"></p><h2 id="2-ä¿®æ”¹-Fluid-é…ç½®"><a href="#2-ä¿®æ”¹-Fluid-é…ç½®" class="headerlink" title="2 ä¿®æ”¹ Fluid é…ç½®"></a>2 ä¿®æ”¹ Fluid é…ç½®</h2><p>åœ¨ <code>_config.fluid.yml</code> ä¸­æˆ–è€… fluid ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­ä¿®æ”¹æ‰¾åˆ°ä»¥ä¸‹é…ç½®é¡¹ï¼ŒæŒ‰ç…§ä¸‹æ–‡å†…å®¹ä¿®æ”¹é…ç½®</p><h3 id="ç½‘é¡µè®¿é—®ç»Ÿè®¡é…ç½®"><a href="#ç½‘é¡µè®¿é—®ç»Ÿè®¡é…ç½®" class="headerlink" title="ç½‘é¡µè®¿é—®ç»Ÿè®¡é…ç½®"></a>ç½‘é¡µè®¿é—®ç»Ÿè®¡é…ç½®</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">web_analytics:</span>  <span class="hljs-comment"># ç½‘é¡µè®¿é—®ç»Ÿè®¡</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># LeanCloud è®¡æ•°ç»Ÿè®¡ï¼Œå¯ç”¨äº PV UV å±•ç¤ºï¼Œå¦‚æœ `web_analytics: enable` æ²¡æœ‰å¼€å¯ï¼ŒPV UV å±•ç¤ºåªä¼šæŸ¥è¯¢ä¸ä¼šå¢åŠ </span><br>  <span class="hljs-comment"># LeanCloud count statistics, which can be used for PV UV display. If `web_analytics: enable` is false, PV UV display will only query and not increase</span><br>  <span class="hljs-attr">leancloud:</span><br>    <span class="hljs-attr">app_id:</span> <span class="hljs-string">ä½ çš„</span> <span class="hljs-string">AppId</span><br>    <span class="hljs-attr">app_key:</span> <span class="hljs-string">ä½ çš„</span> <span class="hljs-string">AppKey</span><br>    <span class="hljs-comment"># REST API æœåŠ¡å™¨åœ°å€ï¼Œå›½é™…ç‰ˆä¸å¡«</span><br>    <span class="hljs-comment"># Only the Chinese mainland users need to set</span><br>    <span class="hljs-attr">server_url:</span> <span class="hljs-string">ä½ çš„</span> <span class="hljs-string">REST</span> <span class="hljs-string">API</span> <span class="hljs-string">æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-comment"># ç»Ÿè®¡é¡µé¢æ—¶è·å–è·¯å¾„çš„å±æ€§</span><br>    <span class="hljs-comment"># Get the attribute of the page path during statistics</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">window.location.pathname</span><br>    <span class="hljs-comment"># å¼€å¯åä¸ç»Ÿè®¡æœ¬åœ°è·¯å¾„( localhost ä¸ 127.0.0.1 )</span><br>    <span class="hljs-comment"># If true, ignore localhost &amp; 127.0.0.1</span><br>    <span class="hljs-attr">ignore_local:</span> <span class="hljs-literal">false</span><br><br></code></pre></td></tr></table></figure><h3 id="æ‰“å¼€æ–‡ç« çš„æµè§ˆé‡è®¡æ•°åŠŸèƒ½"><a href="#æ‰“å¼€æ–‡ç« çš„æµè§ˆé‡è®¡æ•°åŠŸèƒ½" class="headerlink" title="æ‰“å¼€æ–‡ç« çš„æµè§ˆé‡è®¡æ•°åŠŸèƒ½"></a>æ‰“å¼€æ–‡ç« çš„æµè§ˆé‡è®¡æ•°åŠŸèƒ½</h3><p>è¿™ä¸ªåœ¨ <code>_config.fluid.yml</code> çš„ post é…ç½®ä¸‹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post:</span><br>    <span class="hljs-comment"># æµè§ˆé‡è®¡æ•°</span><br>    <span class="hljs-comment"># Number of visits</span><br>    <span class="hljs-attr">views:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-comment"># ç»Ÿè®¡æ•°æ®æ¥æº</span><br>      <span class="hljs-comment"># Data Source</span><br>      <span class="hljs-comment"># Options: busuanzi | leancloud</span><br>      <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;leancloud&quot;</span><br>      <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;&#123;&#125; æ¬¡&quot;</span><br></code></pre></td></tr></table></figure><h3 id="é¡µé¢åº•éƒ¨å±•ç¤ºç½‘ç«™çš„-PVï¼ŒUV"><a href="#é¡µé¢åº•éƒ¨å±•ç¤ºç½‘ç«™çš„-PVï¼ŒUV" class="headerlink" title="é¡µé¢åº•éƒ¨å±•ç¤ºç½‘ç«™çš„ PVï¼ŒUV"></a>é¡µé¢åº•éƒ¨å±•ç¤ºç½‘ç«™çš„ PVï¼ŒUV</h3><p>åœ¨ <code>footer</code> é…ç½®é¡¹ä¸­åšè°ƒæ•´</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">footer:</span><br>  <span class="hljs-comment"># å±•ç¤ºç½‘ç«™çš„ PVã€UV ç»Ÿè®¡æ•°</span><br>  <span class="hljs-comment"># Display website PV and UV statistics</span><br>  <span class="hljs-attr">statistics:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># ç»Ÿè®¡æ•°æ®æ¥æºï¼Œä½¿ç”¨ leancloud éœ€è¦è®¾ç½® `web_analytics: leancloud` ä¸­çš„å‚æ•°ï¼›ä½¿ç”¨ busuanzi ä¸éœ€è¦é¢å¤–è®¾ç½®ï¼Œä½†æ˜¯æœ‰æ—¶ä¸ç¨³å®šï¼Œå¦å¤–æœ¬åœ°è¿è¡Œæ—¶ busuanzi æ˜¾ç¤ºç»Ÿè®¡æ•°æ®å¾ˆå¤§å±äºæ­£å¸¸ç°è±¡ï¼Œéƒ¨ç½²åä¼šæ­£å¸¸</span><br>    <span class="hljs-comment"># Data source. If use leancloud, you need to set the parameter in `web_analytics: leancloud`</span><br>    <span class="hljs-comment"># Options: busuanzi | leancloud</span><br>    <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;leancloud&quot;</span><br><br>    <span class="hljs-attr">pv_format:</span> <span class="hljs-string">&quot;æ€»è®¿é—®é‡ &#123;&#125; æ¬¡&quot;</span><br>    <span class="hljs-attr">uv_format:</span> <span class="hljs-string">&quot;æ€»è®¿å®¢æ•° &#123;&#125; äºº&quot;</span><br></code></pre></td></tr></table></figure><h2 id="é¡µé¢æ•ˆæœ"><a href="#é¡µé¢æ•ˆæœ" class="headerlink" title="é¡µé¢æ•ˆæœ"></a>é¡µé¢æ•ˆæœ</h2><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/%E6%96%87%E7%AB%A0%E6%B5%8F%E8%A7%88%E9%87%8F.png" alt="æ–‡ç« æµè§ˆé‡"></p><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/pvuv.png" alt="pv &amp; uv"></p><h1 id="è¯„è®ºåŠŸèƒ½"><a href="#è¯„è®ºåŠŸèƒ½" class="headerlink" title="è¯„è®ºåŠŸèƒ½"></a>è¯„è®ºåŠŸèƒ½</h1><p>è¯„è®ºåŠŸèƒ½ç›¸å…³çš„ä»£ç åŒæ ·æ˜¯ Fluid æœ¬èº«å†™å¥½çš„ï¼Œä¿®æ”¹ä¸€äº›é…ç½®å³å¯ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨åŸºäº leancloud çš„ valine æ¥é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment"># æŒ‡å®šçš„æ’ä»¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½®å¯¹åº”æ’ä»¶çš„å¿…è¦å‚æ•°</span><br>    <span class="hljs-comment"># The specified plugin needs to set the necessary parameters at the same time</span><br>    <span class="hljs-comment"># Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo | cusdis | giscus | discuss</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">valine</span><br><br><span class="hljs-attr">valine:</span><br>  <span class="hljs-attr">appId:</span> <span class="hljs-string">ä½ çš„</span> <span class="hljs-string">LeanCloud</span> <span class="hljs-string">AppID</span><br>  <span class="hljs-attr">appKey:</span> <span class="hljs-string">ä½ çš„</span> <span class="hljs-string">LeanCloud</span> <span class="hljs-string">AppKey</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">window.location.pathname</span><br>  <span class="hljs-attr">placeholder:</span> <span class="hljs-string">è¯´ç‚¹ä»€ä¹ˆ...</span><br>  <span class="hljs-attr">avatar:</span> <span class="hljs-string">&#x27;retro&#x27;</span><br>  <span class="hljs-attr">meta:</span> [<span class="hljs-string">&#x27;nick&#x27;</span>, <span class="hljs-string">&#x27;mail&#x27;</span>, <span class="hljs-string">&#x27;link&#x27;</span>]<br>  <span class="hljs-attr">requiredFields:</span> []<br>  <span class="hljs-attr">pageSize:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">lang:</span> <span class="hljs-string">&#x27;zh-CN&#x27;</span><br>  <span class="hljs-attr">highlight:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">recordIP:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">serverURLs:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">emojiCDN:</span><br>  <span class="hljs-attr">emojiMaps:</span><br>  <span class="hljs-attr">enableQQ:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h2 id="é¡µé¢æ•ˆæœ-1"><a href="#é¡µé¢æ•ˆæœ-1" class="headerlink" title="é¡µé¢æ•ˆæœ"></a>é¡µé¢æ•ˆæœ</h2><p><img src="/2023/10/07/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E8%87%AA%E8%BF%B0/comments.png" alt="å‘è¡¨è¯„è®º"></p><h1 id="å…¶ä»–æ’ä»¶"><a href="#å…¶ä»–æ’ä»¶" class="headerlink" title="å…¶ä»–æ’ä»¶"></a>å…¶ä»–æ’ä»¶</h1><p>è¿™éƒ¨åˆ†æ’ä»¶é€šå¸¸éœ€è¦ç”¨åˆ°é¢å¤–çš„ js&#x2F;css æ–‡ä»¶ï¼Œéœ€è¦æ·»åŠ åˆ° <code>source/js</code> æ–‡ä»¶å¤¹ä¸­</p><blockquote><p>æ‰€æœ‰è¿™éƒ¨åˆ†æ–‡ä»¶éƒ½å¯ä»¥åœ¨<a href="https://github.com/duhaode520/duhaode520.github.io">åšå®¢åŸå§‹ repo </a>çš„ source æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°</p></blockquote><h2 id="æ·»åŠ ä¸»é¡µåˆ›å»ºæ—¶é—´"><a href="#æ·»åŠ ä¸»é¡µåˆ›å»ºæ—¶é—´" class="headerlink" title="æ·»åŠ ä¸»é¡µåˆ›å»ºæ—¶é—´"></a>æ·»åŠ ä¸»é¡µåˆ›å»ºæ—¶é—´</h2><p>åœ¨ <code>_config.fluid.yml</code> ä¸­æ‰¾åˆ° <code>footer</code> è¿›è¡Œæ·»åŠ </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">footer:</span><br>  <span class="hljs-comment"># é¡µè„šç¬¬ä¸€è¡Œæ–‡å­—çš„ HTMLï¼Œå»ºè®®ä¿ç•™ Fluid çš„é“¾æ¥ï¼Œç”¨äºå‘æ›´å¤šäººæ¨å¹¿æœ¬ä¸»é¢˜</span><br>  <span class="hljs-comment"># HTML of the first line of the footer, it is recommended to keep the Fluid link to promote this theme to more people</span><br>  <span class="hljs-attr">content:</span> <span class="hljs-string">&#x27;</span><br><span class="hljs-string">    &lt;div&gt;</span><br><span class="hljs-string">      &lt;span id=&quot;timeDate&quot;&gt;è½½å…¥å¤©æ•°...&lt;/span&gt;</span><br><span class="hljs-string">      &lt;span id=&quot;times&quot;&gt;è½½å…¥æ—¶åˆ†ç§’...&lt;/span&gt;</span><br><span class="hljs-string">      &lt;script src=&quot;/js/duration.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-string">    &lt;/div&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºæ–‡ä»¶ <code>source/js/duration.js</code>ï¼Œå…¶ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createtime</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> grt= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">&quot;03/10/2023 00:00:00&quot;</span>);<span class="hljs-comment">//åœ¨æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´ï¼Œæ ¼å¼ï¼šæœˆ/æ—¥/å¹´ æ—¶:åˆ†:ç§’</span><br>    now.<span class="hljs-title function_">setTime</span>(now.<span class="hljs-title function_">getTime</span>()+<span class="hljs-number">250</span>);<br>    days = (now - grt ) / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> / <span class="hljs-number">24</span>; dnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(days);<br>    hours = (now - grt ) / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> - (<span class="hljs-number">24</span> * dnum); hnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(hours);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(hnum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;hnum = <span class="hljs-string">&quot;0&quot;</span> + hnum;&#125; minutes = (now - grt ) / <span class="hljs-number">1000</span> /<span class="hljs-number">60</span> - (<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * dnum) - (<span class="hljs-number">60</span> * hnum);<br>    mnum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(minutes); <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(mnum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;mnum = <span class="hljs-string">&quot;0&quot;</span> + mnum;&#125;<br>    seconds = (now - grt ) / <span class="hljs-number">1000</span> - (<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * dnum) - (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * hnum) - (<span class="hljs-number">60</span> * mnum);<br>    snum = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(seconds); <span class="hljs-keyword">if</span>(<span class="hljs-title class_">String</span>(snum).<span class="hljs-property">length</span> ==<span class="hljs-number">1</span> )&#123;snum = <span class="hljs-string">&quot;0&quot;</span> + snum;&#125;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;timeDate&quot;</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ &quot;</span>+dnum+<span class="hljs-string">&quot; å¤© &quot;</span>;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;times&quot;</span>).<span class="hljs-property">innerHTML</span> = hnum + <span class="hljs-string">&quot; å°æ—¶ &quot;</span> + mnum + <span class="hljs-string">&quot; åˆ† &quot;</span> + snum + <span class="hljs-string">&quot; ç§’&quot;</span>;<br>&#125;<br><span class="hljs-built_in">setInterval</span>(<span class="hljs-string">&quot;createtime()&quot;</span>,<span class="hljs-number">250</span>);<br></code></pre></td></tr></table></figure><h2 id="åŠ¨æ€å½©å¸¦"><a href="#åŠ¨æ€å½©å¸¦" class="headerlink" title="åŠ¨æ€å½©å¸¦"></a>åŠ¨æ€å½©å¸¦</h2><p>é¦–å…ˆåœ¨ <code>_config.fluid.yml</code> ä¸­æ‰¾åˆ° <code>custom.js</code> è¿›è¡Œæ·»åŠ :</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">custom_js:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/js/DynamicRobbin.js</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ æ–‡ä»¶ <code>source/js/DynamicRobbin.js</code>ï¼Œåœ¨é¡¹ç›®repoä¸­ç›´æ¥æ‹·è´å³å¯ï¼š<a href="https://github.com/duhaode520/duhaode520.github.io/tree/main/source/js/DynamicRobbin.js">https://github.com/duhaode520/duhaode520.github.io/tree/main/source/js/DynamicRobbin.js</a>  </p>]]></content>
    
    
    <categories>
      
      <category>åšå®¢å»ºç«™</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµ‹è¯•æ–‡ç« </title>
    <link href="/2023/10/06/test-article/"/>
    <url>/2023/10/06/test-article/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« </p><img src="/2023/10/06/test-article/test.png" class="" title="å›¾ç‰‡å¼•ç”¨æ–¹æ³•ä¸€"><p><img src="/2023/10/06/test-article/test.png" alt="å›¾ç‰‡å¼•ç”¨æ–¹æ³•äºŒ"></p><p><img src="/images/test.png" alt="å›¾ç‰‡å¼•ç”¨æ–¹æ³•ä¸‰"></p>]]></content>
    
    
    <categories>
      
      <category>test</category>
      
    </categories>
    
    
    <tags>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Yarn ç®€ä»‹</title>
    <link href="/2023/03/17/YARN-%E7%AE%80%E4%BB%8B/"/>
    <url>/2023/03/17/YARN-%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="Yarnçš„è¿è¡Œæœºåˆ¶"><a href="#Yarnçš„è¿è¡Œæœºåˆ¶" class="headerlink" title="Yarnçš„è¿è¡Œæœºåˆ¶"></a>Yarnçš„è¿è¡Œæœºåˆ¶</h2><p><img src="/2023/03/17/YARN-%E7%AE%80%E4%BB%8B/yarn_arch.png" alt="Yarn çš„è¿è¡Œæœºåˆ¶"></p><p>Yarnä¸­ä¸‰ç±»é‡è¦å®ä½“</p><ul><li>resource managerï¼šç®¡ç†é›†ç¾¤ä¸Šèµ„æºä½¿ç”¨</li><li>node managerï¼šè¿è¡Œåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼Œèƒ½å¤Ÿå¯åŠ¨å’Œç›‘æ§å®¹å™¨</li><li>Containerï¼šç”¨äºæ‰§è¡Œç‰¹å®šçš„åº”ç”¨ç¨‹åºï¼Œæœ‰ä¸€å®šçš„èµ„æºé™åˆ¶</li></ul><p>è¿è¡Œæµç¨‹ï¼š</p><ul><li>å®¢æˆ·ç«¯è”ç³» resource managerï¼Œè¦æ±‚å¯åŠ¨ä¸€ä¸ª application master è¿›ç¨‹</li><li>resource manager æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥å¯åŠ¨ application master çš„ node managerï¼Œç„¶åå¯åŠ¨è¿™ä¸ªå®¹å™¨<ul><li>applicationè¿è¡Œèµ·æ¥åå¯èƒ½æ˜¯è¿”å›ä¸€ä¸ªè®¡ç®— application ç»™å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰§è¡Œåˆ†å¸ƒå¼è®¡ç®—â€”â€”ç”³è¯·èµ„æºã€åˆ›å»ºæ–°çš„ application å’Œå®¹å™¨</li></ul></li></ul><p>Yarn æœ¬èº«ä¸æä¾›é€šä¿¡æœºåˆ¶ï¼Œåªæ˜¯èµ„æºçš„ç”³è¯·åˆ†é…</p><p>ç”³è¯·åˆ†é…ä¸ºäº†èŠ‚çœå¸¦å®½è¿˜æ˜¯é‡‡ç”¨äº†åœ¨ç½‘ç»œæ‹“æ‰‘ä¸Šçš„å°±è¿‘ï¼ˆèŠ‚ç‚¹â€”â€”æœºæ¶â€”â€”anyï¼‰</p><p>æŒ‰ç…§ç”¨æˆ·å’Œapplicationä¹‹é—´æ¥åˆ†ç±»</p><ul><li>ä¸€ä¸ªç”¨æˆ·ä½œä¸šå¯¹åº”ä¸€ä¸ªapplicationï¼šMapReduce</li><li>ç”¨æˆ·ä½œä¸šä¸­çš„ä¸€ä¸ªå·¥ä½œæµå¯¹åº”ä¸€ä¸ªapplicationï¼šSpark</li><li>å¤šä¸ªä¹Ÿç”¨æˆ·å¯¹ä¸€ä¸ª applicationï¼š Slider</li></ul><div class="note note-primary">            <p>ğŸ”´ å…¶å®å°±æ˜¯ï¼šä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€</p>          </div><h2 id="Yarnçš„ä¼˜åŠ¿"><a href="#Yarnçš„ä¼˜åŠ¿" class="headerlink" title="Yarnçš„ä¼˜åŠ¿"></a>Yarnçš„ä¼˜åŠ¿</h2><ul><li>Scalabilityï¼šYarnä¸­å¯¹äºjobtracker çš„èµ„æºè°ƒåº¦å’Œä»»åŠ¡ç›‘æ§çš„èŒè´£åˆ†ç¦»å¸¦æ¥çš„å¥½å¤„</li><li>Availabilityï¼šåŒæ ·æ˜¯èŒè´£åˆ†ç¦»ï¼Œresource manager å’Œ application master å¯ä»¥åˆ†åˆ«åšé«˜å¯ç”¨</li><li>Utilization: Yarn å¯¹äºèµ„æºçš„ç®¡ç†æ›´ç²¾ç»†ï¼Œslotæ¯”è¾ƒå¤§</li><li>Multitenancyï¼šYarn å¯ä»¥ä¸ºæ›´å¤šçš„åº”ç”¨æä¾›æœåŠ¡ï¼ŒMapReduceä»…æ˜¯æœŸä¸­çš„ä¸€ä¸ª</li></ul><h2 id="Yarnçš„è°ƒåº¦"><a href="#Yarnçš„è°ƒåº¦" class="headerlink" title="Yarnçš„è°ƒåº¦"></a>Yarnçš„è°ƒåº¦</h2><p>ä¸‰ç§è°ƒåº¦å™¨ï¼š</p><ul><li><p>FIFOè°ƒåº¦å™¨ï¼šç®€å•ä¸ç”¨é…ç½®ï¼Œä¸é€‚åˆå…±äº«é›†ç¾¤ï¼Œæ¯ä¸ªä»»åŠ¡å¿…é¡»éƒ½èƒ½åˆ°è½®åˆ°è‡ªå·±æ‰è¡Œ</p>  <div class="note note-primary">            <p>æ„Ÿè§‰åŸºæœ¬ä¸Šåªé€‚åˆè‡ªå·±ç©ç©çš„æ—¶å€™ç”¨ï¼Œæˆ–è€…èµ„æºç‰¹åˆ«ä¸°ç››çš„æ—¶å€™ï¼Œæ¯ä¸ªäººå®é™…ä¸Šownäº†ä¸€ä¸ªé›†ç¾¤å¯ä»¥è‡ªå·±ç©     </p>          </div>   </li><li><p><strong>å®¹é‡è°ƒåº¦å™¨ï¼š</strong>æœ‰ä¸€ä¸ªç‹¬ç«‹çš„é˜Ÿåˆ—ä¿è¯å°ä½œä¸šçš„æäº¤å’Œå¯åŠ¨ï¼Œå¤§ä½œä¸šç­‰å¾…çš„æ—¶é—´ç›¸å¯¹é•¿ (default)</p></li><li><p>å…¬å¹³è°ƒåº¦å™¨ï¼šæ¯ä¸€ä¸ªç”¨æˆ·å¹³åˆ†æ‰€æœ‰èµ„æºï¼ˆåœ¨åŸæœ‰ä»»åŠ¡é‡Šæ”¾å‡ºæ¥åï¼‰ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·çš„ä»»åŠ¡å†åˆ†åˆ«å¹³åˆ†è¿™ä¸ªç”¨æˆ·æ‹¥æœ‰çš„æ‰€æœ‰çš„èµ„æº</p></li></ul><p><strong>å®¹é‡è°ƒåº¦å™¨çš„é…ç½® <code>capacity-scheduler.xml</code>ï¼š</strong></p><p>å¯ä»¥é…ç½®æ¯ä¸€ä¸ªé˜Ÿåˆ—æ‹¥æœ‰çš„å›ºå®šçš„ capacityï¼ˆ%ï¼‰ å’Œç”¨äºå¼¹æ€§ä½¿ç”¨çš„ max capacityï¼ˆä¸è®¾ç½®é»˜è®¤å¯ä»¥å ç”¨å…¨éƒ¨çš„å®¹é‡ï¼‰, é˜Ÿåˆ—è¿˜å¯ä»¥é€šè¿‡ <code>a.b.queues</code> çš„æ–¹å¼å®šä¹‰å­é˜Ÿåˆ—</p><p>é€šè¿‡å±æ€§ <code>mapreduce.job.queuename</code> å†³å®šä»»åŠ¡æ¨é€çš„é˜Ÿåˆ—</p><p><strong>å…¬å¹³è°ƒåº¦å™¨çš„é…ç½® <code>fair-scheduler.xml</code>ï¼š</strong></p><ul><li><p>æƒé‡å…ƒç´ ï¼šå¯ä»¥è®¾ç½®å“ªä¸€ä¸ªé˜Ÿåˆ—çš„å æ¯”æ›´å¤§ï¼Œé€šè¿‡ <code>queue.weight</code> å±æ€§</p></li><li><p>è°ƒåº¦ç­–ç•¥ï¼šé»˜è®¤æ˜¯ fairï¼Œä¹Ÿå¯ä»¥æœ‰é˜Ÿåˆ—çº§çš„ fifoï¼ˆåªå¯¹è¯¥é˜Ÿåˆ—ä¸­çš„å„ä¸ªä»»åŠ¡ï¼‰ï¼ŒDRF (Dominant Resource Fairness, æ ¹æ®å ç”¨æœ€å¤šçš„èµ„æºè¿›è¡Œ fair è°ƒåº¦)</p></li><li><p>å¯ä»¥é€šè¿‡ <code>queuePlacementPolicy</code> è®¾ç½®é˜Ÿåˆ—æ”¾ç½®è§„åˆ™ï¼Œé»˜è®¤ä¼šæœ‰ â€œspecifiedâ€, â€œuserâ€, â€œprimaryGroupâ€, â€œdefaultâ€ ç­‰</p>  <div class="note note-primary">            <p>ğŸ’¡ å¦‚æœåªä½¿ç”¨ default åˆ™ç›¸å½“äºä¾¿æ·çš„å®ç°äº†å¯¹äºæ‰€æœ‰ä»»åŠ¡çš„å…¬å¹³è°ƒåº¦ï¼Œå› ä¸ºæ‰€æœ‰ä»»åŠ¡éƒ½ä¼šè¢«å¡è¿›ä¸€ä¸ªé˜Ÿåˆ—ä¸­</p>          </div></li><li><p>æŠ¢å ï¼šå…¬å¹³è°ƒåº¦å™¨å…è®¸æŠ¢å ï¼Œä½†æ˜¯æŠ¢å ä¼šé™ä½é›†ç¾¤çš„æ•ˆç‡</p></li></ul><p><strong><strong>å»¶è¿Ÿè°ƒåº¦</strong></strong></p><p>ä¸€ä¸ªéå¸¸trickyçš„è°ƒåº¦ç­–ç•¥ï¼šå¦‚æœè¯·æ±‚èŠ‚ç‚¹å®¹å™¨æ—¶å‘ç°æ²¡æœ‰ï¼Œå¯ä»¥ç­‰å¾…æ•°ç§’ï¼ˆæ•°ä¸ªheartbeatï¼ˆä¸€èˆ¬æ˜¯1sï¼‰ï¼‰ï¼Œè¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜åœ¨å½“å‰èŠ‚ç‚¹è·å¾—ä¸€ä¸ªå®¹å™¨çš„æœºä¼šï¼Œè€Œä¸æ˜¯ä¸‹ä¸€çº§èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹â†’æœºæ¶â†’othersï¼‰</p><p>æ¯ä¸€ä¸ª heartbeat æ˜¯ä¸€ä¸ªæ½œåœ¨çš„è°ƒåº¦æœºä¼š</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>å¼•æ“åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hadoop HDFS</title>
    <link href="/2023/03/07/Hadoop-HDFS/"/>
    <url>/2023/03/07/Hadoop-HDFS/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>ã€ŠHadoop æƒå¨æŒ‡å—ã€‹è¯»ä¹¦ç¬”è®°</p>          </div><p>HDFSæ˜¯æµå¼è®¿é—®çš„ï¼šä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»å–ä¸”åªæ”¯æŒå•ä¸ªå†™å…¥è€…ï¼Œè€Œä¸”æ˜¯å¢é‡å†™å…¥çš„</p><h2 id="HDFSçš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ"><a href="#HDFSçš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="HDFSçš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ"></a>HDFSçš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ</h2><ul><li>æ•°æ®å—ï¼šé»˜è®¤ä¸º128MB</li></ul><div class="note note-primary">            <p>ğŸ’¡ è¿™ä¸ª128MBä¸ç£ç›˜çš„ä¼ è¾“é€Ÿç‡æ˜¯åŒ¹é…çš„ï¼Œå¦‚æœä¼ è¾“é€Ÿç‡æé«˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥æœ‰æ›´å¤§çš„ block å¤§å°</p>          </div><ul><li>namenode å’Œ datanode<ul><li>namenodeï¼šç»´æŠ¤æ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´ï¼ˆæ ‘ï¼‰ï¼šæ°¸ä¹…ä¿å­˜åœ¨æœ¬åœ°ç£ç›˜</li><li>datanodeï¼šå‚¨å­˜å¹¶æ£€ç´¢ blocksï¼Œå®šæœŸå‘ namenode æŠ¥å‘Šå‚¨å­˜çš„ block åˆ—è¡¨</li><li>ä¸¤ç§å®¹é”™æ–¹æ³•ï¼šå¤‡ä»½æ–‡ä»¶æˆ–è€…æ·»åŠ è¾…åŠ©namenode</li></ul></li><li>å—ç¼“å­˜ï¼šä¸€èˆ¬ä¸€ä¸ªå—ä»…åœ¨ä¸€ä¸ªdatanodeä¸­æœ‰å—ç¼“å­˜</li><li>è”é‚¦HDFSï¼šåœ¨æ•°æ®è§„æ¨¡å¤ªå¤§æ—¶ï¼Œå†…å­˜ä¼šæˆä¸ºç“¶é¢ˆâ€”â€”å…è®¸å¤šä¸ªnamenode</li><li>é«˜å¯ç”¨æ€§</li></ul><div class="note note-primary">            <p>ğŸ’¡ åŒºåˆ†é«˜å¯ç”¨æ€§å’Œå¤‡ä»½ï¼šé«˜å¯ç”¨æ€§éœ€è¦åœ¨åŸæœ‰çš„downä¹‹ååœ¨ä¸å¯è¢«ç”¨æˆ·æ„ŸçŸ¥çš„æ—¶é—´å†…æœ‰æ–°çš„ä¸»æœºä¸Šçº¿</p><p><strong>Hadoop2 ç»´æŠ¤é«˜å¯ç”¨çš„æ–¹å¼</strong><br>æœ‰ä¸€å¯¹namenodeså¤„äºä¸»å¤‡é…ç½®ã€‚å¦‚æœæ´»åŠ¨namenodeæ•…éšœï¼Œå¤‡ç”¨namenodeå°†æ¥ç®¡å…¶èŒè´£ï¼Œä»¥ç»§ç»­ä¸ºå®¢æˆ·ç«¯è¯·æ±‚æä¾›æœåŠ¡è€Œä¸ä¼šå‡ºç°é‡å¤§ä¸­æ–­ã€‚éœ€è¦è¿›è¡Œä¸€äº›ä½“ç³»ç»“æ„æ›´æ”¹æ‰èƒ½å®ç°è¿™ä¸€ç‚¹ï¼š</p><ol><li>namenodeså¿…é¡»ä½¿ç”¨é«˜å¯ç”¨å…±äº«å­˜å‚¨æ¥å…±äº«ç¼–è¾‘æ—¥å¿—ã€‚å½“å¤‡ç”¨namenodeå¯åŠ¨æ—¶ï¼Œå®ƒå°†è¯»å–å…±äº«ç¼–è¾‘æ—¥å¿—çš„æœ«å°¾ä»¥å°†å…¶çŠ¶æ€ä¸æ´»åŠ¨namenodeåŒæ­¥ï¼Œç„¶åç»§ç»­è¯»å–ç”±æ´»åŠ¨namenodeç¼–å†™çš„æ–°æ¡ç›®ã€‚</li><li>ç”±äºå—æ˜ å°„å­˜å‚¨åœ¨namenodeçš„å†…å­˜ä¸­è€Œä¸æ˜¯ç£ç›˜ä¸Šï¼Œå› æ­¤datanodeså¿…é¡»å‘ä¸¤ä¸ªnamenodeså‘é€å—æŠ¥å‘Šã€‚</li><li>å®¢æˆ·ç«¯å¿…é¡»é…ç½®ä»¥å¤„ç†namenodeæ•…éšœè½¬ç§»ï¼Œä½¿ç”¨å¯¹ç”¨æˆ·é€æ˜çš„æœºåˆ¶ã€‚</li><li>å¤‡ç”¨namenodeçš„è§’è‰²è¢«ä¸»å¤‡namenodesä»£æ›¿ï¼Œåè€…å¯¹æ´»åŠ¨namenodeçš„åç§°ç©ºé—´è¿›è¡Œå®šæœŸæ£€æŸ¥ç‚¹ã€‚</li></ol><p>Hadoop çš„é«˜å¯ç”¨åŒæ—¶ä¹Ÿæ˜¯ä½¿ç”¨äº† Zookeeper çš„ï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯ç”¨ Zookeeper+å¿ƒè·³ç›‘è§†æ¥å®ç°æ•…éšœè½¬ç§»</p>          </div><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>HTTPæ¯”åŸç”Ÿçš„è¦æ…¢ï¼Œä¸è¦ç”¨ä»–ä¼ è¾“å¤§æ–‡ä»¶ï¼ˆå°±æ˜¯ç”¨ <code>hdfs://</code> è¿™ç§è®¿é—®æ¥ä¼ è¾“æ–‡ä»¶ï¼‰</p><h3 id="åŸºäº-Java-çš„è¯»å†™"><a href="#åŸºäº-Java-çš„è¯»å†™" class="headerlink" title="åŸºäº Java çš„è¯»å†™"></a>åŸºäº Java çš„è¯»å†™</h3><p><strong>è¯»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">FileSystem</span> <span class="hljs-variable">fs</span> <span class="hljs-operator">=</span> FileSystem.get(URI.create(uri), conf);<br><span class="hljs-type">FSDataInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>in = fs.open(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Path</span>(uri));<br>in.seek(<span class="hljs-number">0</span>)<br><span class="hljs-comment">// FSDataInputStream extends InputStream</span><br><span class="hljs-comment">// Special Methods:</span><br><span class="hljs-comment">// void seek(long pos);</span><br><span class="hljs-comment">// long getPos();</span><br><span class="hljs-comment">// å®ç°éšæœºè®¿é—®å’Œå½“å‰ä½ç½®è·ç¦»åˆå§‹çš„åç§»é‡</span><br></code></pre></td></tr></table></figure><p><strong><strong>å†™ï¼š</strong></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">OutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> fs.create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Path</span>(dst), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Progressable</span>() &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">progress</span><span class="hljs-params">()</span> &#123;<br>System.out.print(<span class="hljs-string">&quot;.&quot;</span>);<br>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>å¯ä»¥é‡è½½ <code>Progressable</code> æ¥å£å®ç°å†™å…¥è¿‡ç¨‹çš„ progress barï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>append(Path f)</code> å‡½æ•°å‘ä¸€ä¸ªæ–‡ä»¶çš„æœ€åæ¥è¿½åŠ </p><div class="note note-warning">            <p>ğŸ’¡ <code>create</code> å‡½æ•°å¯ä»¥åˆ›å»ºä¸å­˜åœ¨çš„çˆ¶æ–‡ä»¶å¤¹ï¼Œå°½ç®¡è¿™æ ·åšå¯èƒ½æœ‰æ—¶å¹¶ä¸å®‰å…¨ï¼Œæ˜¯é€’å½’åˆ›å»ºçš„<br><code>append</code> ç”±äºè°ƒç”¨äº† <code>create</code>ï¼Œå› æ­¤ä¹Ÿæ‹¥æœ‰è¿™æ ·çš„ç‰¹æ€§</p>          </div><p>æ­¤å¤–ï¼Œç”¨ <code>FileSystem</code> çš„ <code>mkdir</code> å¯ä»¥åˆ›å»ºç›®å½•ï¼Œå°½ç®¡é€šå¸¸æƒ…å†µä¸éœ€è¦è¿™æ ·åš</p><h3 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h3><p><code>FileStatus</code> ç±»ä¿å­˜äº†æ–‡ä»¶çš„ metadataï¼ŒåŒæ—¶ FS å¯ä»¥é€šè¿‡ listStatus å‡½æ•°æ¥åˆ—å‡ºç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// code example here to covert FileStatus to Path</span><br>FileStatus[] status = fs.listStatus(paths);<br>Path[] listedPaths = FileUtil.stat2Paths(status);<br></code></pre></td></tr></table></figure><p><code>globStatus</code> æ–¹æ³•ç”¨äºåŒ¹é…é€šé…ç¬¦ï¼Œå¤æ‚çš„åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…éœ€è¦å®ç° <code>PathFilter</code> æ¥å£</p><p><code>delete</code> æ¥åˆ é™¤æ•°æ®ï¼Œå¹¶å¯ä»¥å†³å®šæ˜¯å¦é€’å½’åˆ é™¤</p><h2 id="è¯»å†™æµç¨‹è§£æ"><a href="#è¯»å†™æµç¨‹è§£æ" class="headerlink" title="è¯»å†™æµç¨‹è§£æ"></a>è¯»å†™æµç¨‹è§£æ</h2><h3 id="è¯»æµç¨‹"><a href="#è¯»æµç¨‹" class="headerlink" title="è¯»æµç¨‹"></a>è¯»æµç¨‹</h3><p><img src="/2023/03/07/Hadoop-HDFS/read.jpeg" alt="HDFS read"></p><ul><li><code>open</code> æ‰“å¼€ä¸€ä¸ªè¦è¯»å–çš„æ–‡ä»¶ï¼Œåˆ›å»º InputStream<ul><li>è¿™ä¸ªè¿‡ç¨‹é€šè¿‡ FileSystem å‘ Namenode å‘é€ä¸€ä¸ªRPCå®ç°ï¼Œç”³è¯·æ–‡ä»¶èµ·å§‹å—çš„åœ°å€</li><li>å¯¹äºæ¯ä¸€ä¸ªå—è¯·æ±‚ï¼ŒNamenode ä¼šè¿”å›ä¸€ä¸ª block æ‰€åœ¨çš„ Datanode çš„åœ°å€</li><li>è¿™äº›åœ°å€æ˜¯æŒ‰ç…§ç½‘ç»œæ‹“æ‰‘çš„è¿œè¿‘é¡ºåºè¿”å›çš„</li></ul></li><li><code>read</code> å‡½æ•°è®© InputStream å»è¿›è¡Œè¯»æ“ä½œï¼ŒInputStream ä¼šæ‰¾åˆ°æœ€è¿‘çš„ Datanode è¯»å–ç¬¬ä¸€ä¸ªå—</li><li>åœ¨è¿™ä¸ªå—è¯»å–å®Œæ—¶ï¼ŒInputStreamå…³é—­å’Œè¿™ä¸ª Datanode çš„è¿æ¥ï¼Œå¹¶è½¬åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘çš„ Datanode ç»§ç»­è¯»å–<ul><li>FS å‘ Namenode è¯·æ±‚æ–‡ä»¶å—çš„åœ°å€æ˜¯ä¸€æ‰¹ä¸€æ‰¹çš„ï¼Œåœ¨è¿™ä¸€æ‰¹è¯»å®Œå‰ä¼šè¯·æ±‚åˆ°ä¸‹ä¸€æ‰¹çš„åœ°å€ï¼Œè¯»å–è¿‡ç¨‹æ˜¯è¿ç»­çš„</li><li>Namenode å‚¨å­˜æ–‡ä»¶å¿«çš„èµ·å§‹åœ°å€æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥éå¸¸é«˜æ•ˆ</li></ul></li><li>è¯»å–å®Œæˆåå…³é—­è¿æ¥</li></ul><div class="note note-primary">            <p>ğŸ”´ å®¹é”™å’Œæ•…éšœå¤„ç†ï¼šå¦‚æœå‘ç°è¿æ¥å¤±è´¥æˆ–è€…è¯»å–çš„å—ä¸å®Œæ•´ï¼ŒFS ä¼šé€šçŸ¥ namenodeï¼Œä»¥åä¸ä»è¿™ä¸ª datanode ä¸­è¿›è¡Œè¯»å–ã€‚</p>          </div><h3 id="å†™æµç¨‹"><a href="#å†™æµç¨‹" class="headerlink" title="å†™æµç¨‹"></a>å†™æµç¨‹</h3><p><img src="/2023/03/07/Hadoop-HDFS/write.jpeg" alt="HDFS write"></p><ul><li>é¦–å…ˆç”¨ <code>create</code> æ–¹æ³•æ¥åˆ›å»ºæ–‡ä»¶ï¼Œç„¶ååŒæ ·ç”± FS å‘ Namenode å‘é€ä¸€ä¸ª RPC æ¥è¿›è¡Œ namenode å¤„æ–‡ä»¶è®°å½•çš„åˆ›å»º</li><li>Namenode ä¼šè¿›è¡Œä¹Ÿç³»åˆ—æ£€æŸ¥ç¡®ä¿åˆ›å»ºæ˜¯åˆæ³•ä¸”æœ‰æƒé™çš„ï¼Œç„¶åè¿”å›ç»™ FSï¼Œè¿™ä¸ªæ—¶å€™ FS ä¼šè¿”å›ç»™ client ä¸€ä¸ª OutputStreamã€‚OutputStream è´Ÿè´£è¿›è¡Œ Namenode å’Œ datanode çš„é€šä¿¡ã€‚</li><li>OutputStream å°†è¦å†™å…¥çš„ blocks æ”¾å…¥ä¸€ä¸ª data queueï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªæµæ°´çº¿è¿‡ç¨‹<ul><li>OutStream å°† block å†™å…¥è¯·æ±‚åˆ°çš„æœ€è¿‘çš„ datanode</li><li>ç„¶ådatanodeå°†å…¶æµæ°´çº¿å†™åˆ° replica çš„ datanodeä¸­</li><li>ç„¶åå†æµæ°´çº¿è¿”å›</li><li>OutputStream è¿˜ç»´æŠ¤ä¸€ä¸ª ack queueï¼Œè®°å½•å®Œå…¨å†™å®Œçš„block</li></ul></li></ul><div class="note note-primary">            <p>ğŸ”´ æ•…éšœå®¹é”™å¤„ç†ï¼šå¦‚æœæœ‰ä¸€ä¸ªå†™å…¥æ•…éšœçš„æ•°æ®åŒ…ï¼Œç«‹åˆ»å…³æ‰æ•´ä¸ªpipelineï¼ŒæŠŠæ‰€æœ‰åœ¨pipeline ä¸­çš„æ•°æ®åŒ…è¿”å›åˆ°æ•°æ®é˜Ÿåˆ—çš„å‰ç«¯ï¼Œç„¶ååœ¨æ­£å¸¸çš„ datanode çš„ block åˆ¶å®šä¸€ä¸ªè¡¨ç¤ºï¼Œç„¶åä¼ é€’ç»™ namenodeã€‚ namenode æ„è¯†åˆ° repica ä¸è¶³æ—¶ï¼Œä¼šç»§ç»­åœ¨æ–°èŠ‚ç‚¹ä¸Šåˆ›å»ºå‰¯æœ¬</p>          </div><ul><li>æ•´ä¸ªåœ¨å†™å…¥å®Œæˆåè°ƒç”¨ close æ–¹æ³•</li></ul><h2 id="distcpå¤åˆ¶"><a href="#distcpå¤åˆ¶" class="headerlink" title="distcpå¤åˆ¶"></a>distcpå¤åˆ¶</h2><p>distcp å¯ä»¥æä¾› HDFS ä¹‹é—´çš„å¤§æ‰¹é‡å¤åˆ¶</p>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>å¼•æ“åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
